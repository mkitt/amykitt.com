var Carousel=function(e){this.el=$(e),this.viewport=$(window),this.images=this.getImages(),this.total_images=this.images.length,this.index=0,this.aspectRatio=1e3/650,this.initialize()};Carousel.prototype.initialize=function(){this.viewport.on("resize",{self:this},this.resize).trigger("resize"),$(this.images[0]).addClass("in"),this.next()},Carousel.prototype.resize=function(e){var t=e.data.self;t.viewport.width()/t.viewport.height()<t.aspectRatio?t.images.removeClass("by-width").addClass("by-height"):t.images.removeClass("by-height").addClass("by-width")},Carousel.prototype.next=function(){var e=this;setTimeout(function(){e.swap()},8e3)},Carousel.prototype.swap=function(){$(this.images[this.index]).removeClass("in"),this.index+=1,this.constrainIndex(),$(this.images[this.index]).addClass("in"),this.next()},Carousel.prototype.constrainIndex=function(){this.index>=this.total_images&&(this.index=0),this.index<0&&(this.index=this.total_images-1)},Carousel.prototype.getImages=function(){var e="",t=this.el.data("images").split(",");t.sort(function(){return.5-Math.random()});for(var n=0,r=t.length;n<r;n+=1){var i=t[n].replace(/^\s/,"");e+='<img class="bg fade" src="/assets/images/'+i+'" alt="'+i+'"/>'}return this.el.append(e),$(".bg",this.el)},function(){var e=new Carousel($(".backgrounds"))}();